// Telegram Web App MainButton and BackButton logic
let tg = window.Telegram?.WebApp;

function updateMainButton(screenId) {
    if (!tg) return;

    tg.MainButton.hide();
    tg.BackButton.hide();

    switch (screenId) {
        case 'main-screen':
            // No MainButton on main screen
            break;
        case 'category-screen':
            tg.BackButton.show();
            break;
        case 'product-detail-screen':
            tg.BackButton.show();
            // MainButton for "Add to Cart" will be handled by the product detail screen itself
            break;
        case 'cart-screen':
            const cartItems = Object.values(cart).filter(item => item.quantity > 0);
            const { subtotal } = calculateCartTotal();
            const minOrderAmount = 3500;
            if (cartItems.length > 0 && subtotal >= minOrderAmount) {
                tg.MainButton.setText('–û—Ñ–æ—Ä–º–∏—Ç—å –∑–∞–∫–∞–∑');
                tg.MainButton.show();
                tg.MainButton.onClick(proceedToOrder);
            }
            tg.BackButton.show();
            break;
        case 'order-form-screen':
            tg.MainButton.setText('–ü–µ—Ä–µ–π—Ç–∏ –∫ –æ–ø–ª–∞—Ç–µ');
            tg.MainButton.show();
            tg.MainButton.onClick(() => document.getElementById('orderForm').requestSubmit());
            tg.BackButton.show();
            break;
        case 'profile-screen':
        case 'my-orders-screen':
            tg.BackButton.show();
            break;
        case 'order-success-screen':
            // No MainButton on success screen
            break;
    }
}

// Override showScreen to update Telegram buttons
const originalShowScreen = window.showScreen;
window.showScreen = function(screenId) {
    originalShowScreen(screenId);
    updateMainButton(screenId);
};

// Initial setup for Telegram buttons
document.addEventListener('DOMContentLoaded', () => {
    if (tg) {
        tg.ready();
        tg.expand();
        tg.onEvent('themeChanged', () => {
            document.body.style.backgroundColor = tg.themeParams.bg_color;
            document.body.style.color = tg.themeParams.text_color;
        });
        tg.BackButton.onClick(() => {
            const currentScreen = document.querySelector('.screen.active').id;
            if (currentScreen === 'category-screen') {
                showMain();
            } else if (currentScreen === 'product-detail-screen') {
                goBackFromProduct();
            } else if (currentScreen === 'cart-screen') {
                showMain();
            } else if (currentScreen === 'order-form-screen') {
                showCart();
            } else if (currentScreen === 'profile-screen') {
                showMain();
            } else if (currentScreen === 'my-orders-screen') {
                showProfile();
            }
        });
    }
    updateMainButton(document.querySelector('.screen.active').id);
});

// –ë–∞–∑–æ–≤—ã–π URL —Å–µ—Ä–≤–µ—Ä–∞ (Railway)
const API_BASE = 'https://nodejs-production-64ed.up.railway.app';

// –ì–ª–æ–±–∞–ª—å–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ
let currentCategory = null;
let currentProduct = null;
let cart = JSON.parse(localStorage.getItem('tundra_cart') || '{}');
let userProfile = JSON.parse(localStorage.getItem('tundra_profile') || '{"totalSpent": 5700, "notificationsEnabled": true}');
let orderCounter = parseInt(localStorage.getItem('tundra_order_counter') || '125');

// –î–∞–Ω–Ω—ã–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–π
const categories = [
    {
        id: 'kolbasy',
        name: '–ö–æ–ª–±–∞—Å—ã',
        desc: '–°—ã—Ä–æ–≤—è–ª–µ–Ω—ã–µ –¥–µ–ª–∏–∫–∞—Ç–µ—Å—ã –∏–∑ –æ–ª–µ–Ω–∏–Ω—ã',
        icon: 'üå≠',
        count: 8
    },
    {
        id: 'pashtet',
        name: '–ü–∞—à—Ç–µ—Ç—ã',
        desc: '–†–∏–π–µ—Ç—ã —Å —Ç—Ä—é—Ñ–µ–ª–µ–º –∏ –≥—Ä–∏–±–∞–º–∏',
        icon: 'ü•´',
        count: 4
    },
    {
        id: 'delikatesy',
        name: '–î–µ–ª–∏–∫–∞—Ç–µ—Å—ã',
        desc: '–ö–∞—Ä–ø–∞—á—á–æ, —Ö–∞–º–æ–Ω, —Å–Ω–µ–∫–∏ –ø—Ä–µ–º–∏—É–º',
        icon: 'ü•©',
        count: 6
    },
    {
        id: 'gotovye',
        name: '–ì–æ—Ç–æ–≤—ã–µ –¥–µ–ª–∏–∫–∞—Ç–µ—Å—ã',
        desc: '–ó–∞–ø–µ—á—ë–Ω–Ω—ã–µ –∫–æ—Ä–µ–π–∫–∏ –∏ –æ–∫–æ—Ä–æ–∫',
        icon: 'üî•',
        count: 5
    },
    {
        id: 'zamorozhennye',
        name: '–ó–∞–º–æ—Ä–æ–∂–µ–Ω–Ω—ã–µ',
        desc: '–ü–µ–ª—å–º–µ–Ω–∏ —Å –æ–ª–µ–Ω–∏–Ω–æ–π –∏ —Ç—Ä—é—Ñ–µ–ª–µ–º',
        icon: '‚ùÑÔ∏è',
        count: 4
    },
    {
        id: 'polufabrikaty',
        name: '–ü–æ–ª—É—Ñ–∞–±—Ä–∏–∫–∞—Ç—ã',
        desc: '–ú—è—Å–æ –¥–ª—è –ø—Ä–∏–≥–æ—Ç–æ–≤–ª–µ–Ω–∏—è',
        icon: 'ü•ì',
        count: 7
    },
    {
        id: 'pirogi-sytnye',
        name: '–ü–∏—Ä–æ–≥–∏ —Å—ã—Ç–Ω—ã–µ',
        desc: '–° –æ–ª–µ–Ω–∏–Ω–æ–π, –≥—Ä–∏–±–∞–º–∏, —Ç—Ä—é—Ñ–µ–ª–µ–º',
        icon: 'ü•ß',
        count: 7
    },
    {
        id: 'pirogi-sladkie',
        name: '–ü–∏—Ä–æ–≥–∏ —Å–ª–∞–¥–∫–∏–µ',
        desc: '–° —è–≥–æ–¥–∞–º–∏ –∏ —Ç–≤–æ—Ä–æ–≥–æ–º',
        icon: 'üßÅ',
        count: 8
    }
];

// –î–∞–Ω–Ω—ã–µ —Ç–æ–≤–∞—Ä–æ–≤
const products = {
    'kolbasy': [
                       {
                   id: 'chorizo-70',
                   name: '–ö–æ–ª–±–∞—Å–∞ –∏–∑ —Å—ã—Ä–æ–≤—è–ª–µ–Ω–∞—è –æ–ª–µ–Ω–∏–Ω—ã "–ß–æ—Ä–∏–∑–æ"',
                   price: 395,
                   unit: '/70 –≥—Ä.',
                   maxQty: 20,
                   image: 'üå≠',
                   imageUrl: 'images/products/kolbasy/chorizo-70.jpg',
                   composition: '–æ–ª–µ–Ω–∏–Ω–∞, –∂–∏—Ä –≥–æ–≤—è–∂–∏–π, —Å–æ–ª—å –ø–æ–≤–∞—Ä–µ–Ω–Ω–∞—è –ø–∏—â–µ–≤–∞—è, —Å–º–µ—Å—å 5 –ø–µ—Ä—Ü–µ–≤, –ø–∞–ø—Ä–∏–∫–∞ –∫–æ–ø—á–µ–Ω–∞—è, –∫–∞—Ä–¥–∞–º–æ–Ω, –ø–µ—Ä–µ—Ü —á–µ—Ä–Ω—ã–π',
                   nutrition: '–±–µ–ª–æ–∫ - 15 –≥, –∂–∏—Ä - 20 –≥',
                   calories: '510 –∫–∫–∞–ª/2140 –∫–î–∂',
                   storage: '180 —Å—É—Ç–æ–∫'
               },
                       {
                   id: 'trufel-70',
                   name: '–ö–æ–ª–±–∞—Å–∞ —Å—ã—Ä–æ–≤—è–ª–µ–Ω–∞—è –∏–∑ –æ–ª–µ–Ω–∏–Ω—ã "–° –¢—Ä—é—Ñ–µ–ª–µ–º"',
                   price: 411,
                   unit: '/70 –≥—Ä.',
                   maxQty: 20,
                   image: 'üå≠',
                   imageUrl: 'images/products/kolbasy/trufel-70.jpg',
                   composition: '–æ–ª–µ–Ω–∏–Ω–∞, –∂–∏—Ä –≥–æ–≤—è–∂–∏–π, —Å–æ–ª—å –ø–æ–≤–∞—Ä–µ–Ω–Ω–∞—è –ø–∏—â–µ–≤–∞—è, —Å–ø–µ—Ü–∏–∏, –ø–µ—Ä–µ—Ü, —Ç—Ä—é—Ñ–µ–ª—å —á–µ—Ä–Ω—ã–π 0,02%, –º—É—Å–∫–∞—Ç–Ω—ã–π –æ—Ä–µ—Ö',
                   nutrition: '–±–µ–ª–æ–∫ - 15 –≥, –∂–∏—Ä - 20 –≥',
                   calories: '510 –∫–∫–∞–ª/2140 –∫–î–∂',
                   storage: '180 —Å—É—Ç–æ–∫'
               },
                       {
                   id: 'kedr-70',
                   name: '–ö–æ–ª–±–∞—Å–∞ —Å—ã—Ä–æ–≤—è–ª–µ–Ω–∞—è –∏–∑ –æ–ª–µ–Ω–∏–Ω—ã "–°–µ–≤–µ—Ä–Ω–∞—è —Å –∫–µ–¥—Ä–æ–≤—ã–º –æ—Ä–µ—Ö–æ–º"',
                   price: 405,
                   unit: '/70 –≥—Ä.',
                   maxQty: 20,
                   image: 'üå≠',
                   imageUrl: 'images/products/kolbasy/kedr-70.jpg',
                   composition: '–æ–ª–µ–Ω–∏–Ω–∞, –∂–∏—Ä –≥–æ–≤—è–∂–∏–π, –æ—Ä–µ—Ö –∫–µ–¥—Ä–æ–≤—ã–π, —Å–º–µ—Å—å —Å–ø–µ—Ü–∏–π –∏ –ø—Ä—è–Ω–æ—Å—Ç–µ–π, —Å–æ–ª—å –ø–æ–≤–∞—Ä–µ–Ω–Ω–∞—è –ø–∏—â–µ–≤–∞—è',
                   nutrition: '–±–µ–ª–æ–∫ - 15 –≥, –∂–∏—Ä - 20 –≥, —É–≥–ª–µ–≤–æ–¥—ã - 8 –≥',
                   calories: '540 –∫–∫–∞–ª/2266 –∫–î–∂',
                   storage: '180 —Å—É—Ç–æ–∫'
               },
        {
            id: 'osobaya-70',
            name: '–ö–æ–ª–±–∞—Å–∞ —Å—ã—Ä–æ–≤—è–ª–µ–Ω–∞—è –∏–∑ –æ–ª–µ–Ω–∏–Ω—ã "–û—Å–æ–±–∞—è"',
            price: 390,
            unit: '/70 –≥—Ä.',
            maxQty: 20,
            image: 'üå≠',
            composition: '–æ–ª–µ–Ω–∏–Ω–∞, –∂–∏—Ä –≥–æ–≤—è–∂–∏–π, —Å–æ–ª—å –ø–æ–≤–∞—Ä–µ–Ω–Ω–∞—è –ø–∏—â–µ–≤–∞—è, —Å–∞—Ö–∞—Ä, —Å–ø–µ—Ü–∏–∏, —á–µ—Å–Ω–æ–∫ –º–æ–ª–æ—Ç—ã–π, –º—É—Å–∫–∞—Ç–Ω—ã–π –æ—Ä–µ—Ö, –ø–µ—Ä–µ—Ü, –∞–Ω—Ç–∏–æ–∫–∏—Å–ª–∏—Ç–µ–ª—å (–∞—Å–∫–æ—Ä–±–∏–Ω–æ–≤–∞—è –∫–∏—Å–ª–æ—Ç–∞), —Å—Ç–∞—Ä—Ç–æ–≤—ã–µ –∫—É–ª—å—Ç—É—Ä—ã (–º–æ–ª–æ—á–Ω–æ–∫–∏—Å–ª—ã–µ –º–∏–∫—Ä–æ–æ—Ä–≥–∞–Ω–∏–∑–º—ã)',
            nutrition: '–±–µ–ª–æ–∫ - 15 –≥, –∂–∏—Ä - 20 –≥',
            calories: '510 –∫–∫–∞–ª/2140 –∫–î–∂',
            storage: '180 —Å—É—Ç–æ–∫'
        },
        {
            id: 'chorizo-170',
            name: '–ö–æ–ª–±–∞—Å–∞ —Å—ã—Ä–æ–≤—è–ª–µ–Ω–∞—è –∏–∑ –æ–ª–µ–Ω–∏–Ω—ã "–ß–æ—Ä–∏–∑–æ"',
            price: 860,
            unit: '/170 –≥—Ä.',
            maxQty: 15,
            image: 'üå≠',
            composition: '–æ–ª–µ–Ω–∏–Ω–∞, –∂–∏—Ä –≥–æ–≤—è–∂–∏–π, —Å–æ–ª—å –ø–æ–≤–∞—Ä–µ–Ω–Ω–∞—è –ø–∏—â–µ–≤–∞—è, —Å–º–µ—Å—å 5 –ø–µ—Ä—Ü–µ–≤, –ø–∞–ø—Ä–∏–∫–∞ –∫–æ–ø—á–µ–Ω–∞—è, –∫–∞—Ä–¥–∞–º–æ–Ω, –ø–µ—Ä–µ—Ü —á–µ—Ä–Ω—ã–π',
            nutrition: '–±–µ–ª–æ–∫ - 15 –≥, –∂–∏—Ä - 20 –≥',
            calories: '510 –∫–∫–∞–ª/2140 –∫–î–∂',
            storage: '180 —Å—É—Ç–æ–∫'
        },
        {
            id: 'trufel-200',
            name: '–ö–æ–ª–±–∞—Å–∞ —Å—ã—Ä–æ–≤—è–ª–µ–Ω–∞—è –∏–∑ –æ–ª–µ–Ω–∏–Ω—ã "–° –¢—Ä—é—Ñ–µ–ª–µ–º"',
            price: 980,
            unit: '/200 –≥—Ä.',
            maxQty: 12,
            image: 'üå≠',
            composition: '–æ–ª–µ–Ω–∏–Ω–∞, –∂–∏—Ä –≥–æ–≤—è–∂–∏–π, —Å–æ–ª—å –ø–æ–≤–∞—Ä–µ–Ω–Ω–∞—è –ø–∏—â–µ–≤–∞—è, —Å–ø–µ—Ü–∏–∏, –ø–µ—Ä–µ—Ü, —Ç—Ä—é—Ñ–µ–ª—å —á–µ—Ä–Ω—ã–π 0,02%, –º—É—Å–∫–∞—Ç–Ω—ã–π –æ—Ä–µ—Ö',
            nutrition: '–±–µ–ª–æ–∫ - 15 –≥, –∂–∏—Ä - 20 –≥',
            calories: '510 –∫–∫–∞–ª/2140 –∫–î–∂',
            storage: '180 —Å—É—Ç–æ–∫'
        },
        {
            id: 'osobaya-170',
            name: '–ö–æ–ª–±–∞—Å–∞ —Å—ã—Ä–æ–≤—è–ª–µ–Ω–∞—è –∏–∑ –æ–ª–µ–Ω–∏–Ω—ã "–û—Å–æ–±–∞—è"',
            price: 885,
            unit: '/170 –≥—Ä.',
            maxQty: 12,
            image: 'üå≠',
            composition: '–æ–ª–µ–Ω–∏–Ω–∞, –∂–∏—Ä –≥–æ–≤—è–∂–∏–π, —Å–æ–ª—å –ø–æ–≤–∞—Ä–µ–Ω–Ω–∞—è –ø–∏—â–µ–≤–∞—è, —Å–∞—Ö–∞—Ä, —Å–ø–µ—Ü–∏–∏, —á–µ—Å–Ω–æ–∫ –º–æ–ª–æ—Ç—ã–π, –º—É—Å–∫–∞—Ç–Ω—ã–π –æ—Ä–µ—Ö, –ø–µ—Ä–µ—Ü',
            nutrition: '–±–µ–ª–æ–∫ - 15 –≥, –∂–∏—Ä - 20 –≥',
            calories: '510 –∫–∫–∞–ª/2140 –∫–î–∂',
            storage: '180 —Å—É—Ç–æ–∫'
        },
        {
            id: 'kedr-160',
            name: '–ö–æ–ª–±–∞—Å–∞ —Å—ã—Ä–æ–≤—è–ª–µ–Ω–∞—è –∏–∑ –æ–ª–µ–Ω–∏–Ω—ã "–°–µ–≤–µ—Ä–Ω–∞—è —Å –∫–µ–¥—Ä–æ–≤—ã–º –æ—Ä–µ—Ö–æ–º"',
            price: 910,
            unit: '/160 –≥—Ä.',
            maxQty: 10,
            image: 'üå≠',
            composition: '–æ–ª–µ–Ω–∏–Ω–∞, –∂–∏—Ä –≥–æ–≤—è–∂–∏–π, –æ—Ä–µ—Ö –∫–µ–¥—Ä–æ–≤—ã–π, —Å–º–µ—Å—å —Å–ø–µ—Ü–∏–π –∏ –ø—Ä—è–Ω–æ—Å—Ç–µ–π, —Å–æ–ª—å –ø–æ–≤–∞—Ä–µ–Ω–Ω–∞—è –ø–∏—â–µ–≤–∞—è',
            nutrition: '–±–µ–ª–æ–∫ - 15 –≥, –∂–∏—Ä - 20 –≥, —É–≥–ª–µ–≤–æ–¥—ã - 8 –≥',
            calories: '540 –∫–∫–∞–ª/2266 –∫–î–∂',
            storage: '180 —Å—É—Ç–æ–∫'
        }
    ],
    'pashtet': [
        {
            id: 'riyet-olene-griby',
            name: '–†–∏–π–µ—Ç –∏–∑ –æ–ª–µ–Ω–∏–Ω—ã —Å –±–µ–ª—ã–º–∏ –≥—Ä–∏–±–∞–º–∏ –∏ —Ç—Ä—é—Ñ–µ–ª–µ–º',
            price: 378,
            unit: '/85 –≥—Ä.',
            maxQty: 15,
            image: 'ü•´',
            composition: '–º—è—Å–æ —Å–µ–≤–µ—Ä–Ω–æ–≥–æ –æ–ª–µ–Ω—è, –≥—Ä–∏–±—ã –±–µ–ª—ã–µ, —Ç—Ä—é—Ñ–µ–ª—å —á–µ—Ä–Ω—ã–π 0,02%, –∂–∏—Ä –æ–ª–µ–Ω–∏–π, –ª—É–∫ —Ä–µ–ø—á–∞—Ç—ã–π',
            nutrition: '–±–µ–ª–∫–∏ - 17,8 –≥, –∂–∏—Ä—ã - 19,8 –≥, —É–≥–ª–µ–≤–æ–¥—ã - 2,6 –≥',
            calories: '259,8 –∫–∫–∞–ª/1087 –∫–î–∂',
            storage: '90 —Å—É—Ç–æ–∫'
        },
        {
            id: 'riyet-serdtse',
            name: '–†–∏–π–µ—Ç –∏–∑ —Å–µ—Ä–¥—Ü–∞ –æ–ª–µ–Ω—è —Å —à–∞–º–ø–∏–Ω—å–æ–Ω–∞–º–∏, —è–≥–æ–¥–∞–º–∏, –º–æ–∂–∂–µ–≤–µ–ª—å–Ω–∏–∫–∞ –∏ —Ä–æ–∑–º–∞—Ä–∏–Ω–æ–º',
            price: 360,
            unit: '/85 –≥—Ä.',
            maxQty: 15,
            image: 'ü•´',
            composition: '–º—è—Å–æ —Å–µ–≤–µ—Ä–Ω–æ–≥–æ –æ–ª–µ–Ω—è, –º–æ—Ä–∫–æ–≤—å, –ª—É–∫, –≤–∏–Ω–æ –±–µ–ª–æ–µ —Å—É—Ö–æ–µ, —Å–æ–ª—å –º–æ—Ä—Å–∫–∞—è, –º–∞—Å–ª–æ —Ä–∞—Å—Ç–∏—Ç–µ–ª—å–Ω–æ–µ, –º–∞—Å–ª–æ —Å–ª–∏–≤–æ—á–Ω–æ–µ, —Å–æ–ª—å, —è–≥–æ–¥—ã –º–æ–∂–∂–µ–≤–µ–ª—å–Ω–∏–∫–∞, –ø–µ—Ä–µ—Ü',
            nutrition: '–±–µ–ª–∫–∏ - 12 –≥, –∂–∏—Ä—ã - 10 –≥, —É–≥–ª–µ–≤–æ–¥—ã - 9 –≥',
            calories: '182 –∫–∫–∞–ª/762 –∫–î–∂',
            storage: '90 —Å—É—Ç–æ–∫'
        },
        {
            id: 'riyet-utka',
            name: '–†–∏–π–µ—Ç –∏–∑ –ø–æ–ª—è—Ä–Ω–æ–π —É—Ç–∫–∏ —Å —Ç—Ä—é—Ñ–µ–ª–µ–º',
            price: 378,
            unit: '/85 –≥—Ä.',
            maxQty: 15,
            image: 'ü•´',
            composition: '–º—è—Å–æ —É—Ç–∫–∏, –±–µ–ª—ã–µ –≥—Ä–∏–±—ã, –≤–∏–Ω–æ –±–µ–ª–æ–µ —Å—É—Ö–æ–µ, —É—Ç–∏–Ω—ã–π –∂–∏—Ä, —Ç—Ä—é—Ñ–µ–ª—å —á–µ—Ä–Ω—ã–π 0,02%, –ª—É–∫, —Å–æ–ª—å –º–æ—Ä—Å–∫–∞—è, —Å–ø–µ—Ü–∏–∏',
            nutrition: '–±–µ–ª–∫–∏ - 13,3 –≥, –∂–∏—Ä—ã - 45,9 –≥, —É–≥–ª–µ–≤–æ–¥—ã - 2,3 –≥',
            calories: '496 –∫–∫–∞–ª/2077 –∫–î–∂',
            storage: '90 —Å—É—Ç–æ–∫'
        },
        {
            id: 'riyet-yagnenok',
            name: '–†–∏–π–µ—Ç –∏–∑ —è–≥–Ω–µ–Ω–∫–∞',
            price: 365,
            unit: '/85 –≥—Ä.',
            maxQty: 15,
            image: 'ü•´',
            composition: '–º—è—Å–æ —è–≥–Ω–µ–Ω–∫–∞, –º–∞—Å–ª–æ —Ä–∞—Å—Ç–∏—Ç–µ–ª—å–Ω–æ–µ, –ª—É–∫, —Å–æ–ª—å –º–æ—Ä—Å–∫–∞—è, —Å–ø–µ—Ü–∏–∏',
            nutrition: '–±–µ–ª–∫–∏ - 15,7 –≥, –∂–∏—Ä—ã - 15,4 –≥, —É–≥–ª–µ–≤–æ–¥—ã - 5,5 –≥',
            calories: '223,4 –∫–∫–∞–ª/935 –∫–î–∂',
            storage: '90 —Å—É—Ç–æ–∫'
        }
    ],
    'delikatesy': [
        {
            id: 'hamon-utka',
            name: '–•–∞–º–æ–Ω –∏–∑ —É—Ç–∫–∏ —Å—ã—Ä–æ–≤—è–ª–µ–Ω—ã–π',
            price: 560,
            unit: '/70 –≥—Ä.',
            maxQty: 12,
            image: 'ü•©',
            composition: '—Ñ–∏–ª–µ —É—Ç–∏–Ω–æ–π –≥—Ä—É–¥–∫–∏ –ø—Ä–µ–º–∏—É–º, —Å–æ–ª—å, —Å–ø–µ—Ü–∏–∏',
            nutrition: '–±–µ–ª–∫–∏ - 18,9 –≥, –∂–∏—Ä—ã - 9 –≥, —É–≥–ª–µ–≤–æ–¥—ã - 1,9 –≥',
            calories: '172 –∫–∫–∞–ª/720,1 –∫–î–∂',
            storage: '180 —Å—É—Ç–æ–∫'
        },
        {
            id: 'karpachcho-olene',
            name: '–ö–∞—Ä–ø–∞—á—á–æ –∏–∑ –æ–ª–µ–Ω–∏–Ω—ã –≤—ã—Å—à–∏–π —Å–æ—Ä—Ç',
            price: 495,
            unit: '/70 –≥—Ä.',
            maxQty: 12,
            image: 'ü•©',
            composition: '–æ–ª–µ–Ω–∏–Ω–∞ –≤—ã—Å—à–∏–π —Å–æ—Ä—Ç, —Å–ø–µ—Ü–∏–∏, —Å–æ–ª—å',
            nutrition: '–±–µ–ª–∫–∏ - 22 –≥, –∂–∏—Ä—ã - 6 –≥',
            calories: '160 –∫–∫–∞–ª/620 –∫–î–∂',
            storage: '180 —Å—É—Ç–æ–∫'
        },
        {
            id: 'sneki-okorok',
            name: '–°–Ω–µ–∫–∏ –∏–∑ –æ–∫–æ—Ä–æ–∫–∞ –æ–ª–µ–Ω—è —Å—ã—Ä–æ–≤—è–ª–µ–Ω—ã–µ "–¢–∞—ë–∂–Ω—ã–µ —Å –¥—ã–º–∫–æ–º"',
            price: 170,
            unit: '/30 –≥—Ä.',
            maxQty: 20,
            image: 'ü•©',
            composition: '–æ–ª–µ–Ω–∏–Ω–∞ 1 —Å–æ—Ä—Ç, —Å–æ–ª—å –ø–æ–≤–∞—Ä–µ–Ω–Ω–∞—è –ø–∏—â–µ–≤–∞—è, BBQ –ø–∞–ø—Ä–∏–∫–∞, –º—É—Å–∫–∞—Ç–Ω—ã–π –æ—Ä–µ—Ö',
            nutrition: '–±–µ–ª–∫–∏ - 20 –≥, –∂–∏—Ä—ã - 6 –≥',
            calories: '180 –∫–∫–∞–ª/610 –∫–î–∂',
            storage: '180 —Å—É—Ç–æ–∫'
        },
        {
            id: 'filey-olene',
            name: '–§–∏–ª–µ–π –æ–ª–µ–Ω—è —Å—ã—Ä–æ–≤—è–ª–µ–Ω—ã–π',
            price: 490,
            unit: '/70 –≥—Ä.',
            maxQty: 12,
            image: 'ü•©',
            composition: '–æ–ª–µ–Ω–∏–Ω–∞, —Å–∞—Ö–∞—Ä, —ç–∫—Å—Ç—Ä–∞–∫—Ç—ã –ø—Ä—è–Ω–æ—Å—Ç–µ–π (—á–µ—Ä–Ω—ã–π –ø–µ—Ä–µ—Ü, –∫–æ—Ä–∏–∞–Ω–¥—Ä), —Å–æ–ª—å –ø–æ–≤–∞—Ä–µ–Ω–Ω–∞—è –ø–∏—â–µ–≤–∞—è',
            nutrition: '–ë–µ–ª–∫–∏ - 20,0 –≥, –∂–∏—Ä—ã - 10,0 –≥, —É–≥–ª–µ–≤–æ–¥—ã - 1,5 –≥',
            calories: '260 –∫–∫–∞–ª/1090 –∫–î–∂',
            storage: '180 —Å—É—Ç–æ–∫'
        },
        {
            id: 'pastila-filey',
            name: '–ü–∞—Å—Ç–∏–ª–∞ —Å—ã—Ä–æ–≤—è–ª–µ–Ω–∞—è –∏–∑ —Ñ–∏–ª–µ—è –æ–ª–µ–Ω—è',
            price: 250,
            unit: '/50 –≥—Ä.',
            maxQty: 15,
            image: 'ü•©',
            composition: '–≤—ã—Ä–µ–∑–∫–∞ –æ–ª–µ–Ω—è –≤—ã—Å—à–∏–π —Å–æ—Ä—Ç, —Å–∞—Ö–∞—Ä, —Å–æ–µ–≤—ã–π —Å–æ—É—Å, —Å–æ–ª—å –ø–æ–≤–∞—Ä–µ–Ω–Ω–∞—è –ø–∏—â–µ–≤–∞—è, –ø–∞–ø—Ä–∏–∫–∞ BBQ, —Å–º–µ—Å—å —Å–ø–µ—Ü–∏–π, –æ—Å—Ç—Ä—ã–π –∫–∞–π–µ–Ω—Å–∫–∏–π –ø–µ—Ä–µ—Ü, –Ω–∏—Ç—Ä–∏—Ç–Ω–æ-–ø–æ—Å–æ–ª–æ—á–Ω–∞—è —Å–º–µ—Å—å',
            nutrition: '–±–µ–ª–∫–∏ - 25 –≥, –∂–∏—Ä—ã ‚Äì 10 –≥, —É–≥–ª–µ–≤–æ–¥—ã - 3 –≥',
            calories: '176 –∫–∫–∞–ª/736 –∫–î–∂',
            storage: '180 —Å—É—Ç–æ–∫'
        },
        {
            id: 'chipsy-olene',
            name: '–ß–∏–ø—Å—ã –∏–∑ –æ–ª–µ–Ω–∏–Ω—ã —Å—ã—Ä–æ–≤—è–ª–µ–Ω—ã–µ',
            price: 230,
            unit: '/50 –≥—Ä.',
            maxQty: 15,
            image: 'ü•©',
            composition: '–æ–ª–µ–Ω–∏–Ω–∞ 1 —Å–æ—Ä—Ç, —Å–æ–ª—å, —Å–æ—É—Å –≤–æ—Ä—á–µ—Å—Ç–µ—Ä, —Å–ø–µ—Ü–∏–∏, —Å–∞—Ö–∞—Ä',
            nutrition: '–±–µ–ª–∫–∏ - 18,0 –≥, –∂–∏—Ä—ã - 7,0 –≥, —É–≥–ª–µ–≤–æ–¥—ã - 12,0 –≥',
            calories: '140 –∫–∫–∞–ª/590 –∫–î–∂',
            storage: '180 —Å—É—Ç–æ–∫'
        }
    ],
    'gotovye': [
        {
            id: 'koreyka-yagody',
            name: '–ö–æ—Ä–µ–π–∫–∞ –æ–ª–µ–Ω—è –∑–∞–ø–µ—á—ë–Ω–Ω–∞—è –≤ —Å–µ–≤–µ—Ä–Ω—ã—Ö —è–≥–æ–¥–∞—Ö',
            price: 4880,
            unit: '/–∫–≥',
            maxQty: 5,
            image: 'üî•',
            composition: '–∫–æ—Ä–µ–π–∫–∞ –æ–ª–µ–Ω—è –≤—ã—Å—à–∏–π —Å–æ—Ä—Ç, –º–∞—Ä–∏–Ω–∞–¥ –∏–∑ –°–µ–≤–µ—Ä–Ω—ã—Ö —è–≥–æ–¥ (–±—Ä—É—Å–Ω–∏–∫–∞, –º–æ—Ä–æ—à–∫–∞), —Å–ø–µ—Ü–∏–∏ (—Ä–æ–∑–º–∞—Ä–∏–Ω, —Å–º–µ—Å—å –ø–µ—Ä—Ü–µ–≤), —Å–æ–ª—å –ø–æ–≤–∞—Ä–µ–Ω–Ω–∞—è –ø–∏—â–µ–≤–∞—è',
            nutrition: '–±–µ–ª–∫–∏ - 22 –≥, –∂–∏—Ä—ã - 11 –≥',
            calories: '260 –∫–∫–∞–ª/1190 –∫–î–∂',
            storage: '20 —Å—É—Ç–æ–∫'
        },
        {
            id: 'koreyka-bbq',
            name: '–ö–æ—Ä–µ–π–∫–∞ –æ–ª–µ–Ω—è –∑–∞–ø–µ—á—ë–Ω–Ω–∞—è "BBQ"',
            price: 4880,
            unit: '/–∫–≥',
            maxQty: 5,
            image: 'üî•',
            composition: '–∫–æ—Ä–µ–π–∫–∞ –æ–ª–µ–Ω—è –≤—ã—Å—à–∏–π —Å–æ—Ä—Ç, –ü–∞–ø—Ä–∏–∫–∞ BBQ, —Å–æ—É—Å –≤–æ—Ä—á–µ—Å—Ç–µ—Ä, —Å–ø–µ—Ü–∏–∏, —Å–æ–ª—å –ø–æ–≤–∞—Ä–µ–Ω–Ω–∞—è –ø–∏—â–µ–≤–∞—è, –Ω–∏—Ç—Ä–∏—Ç–Ω–æ-–ø–æ—Å–æ–ª–æ—á–Ω–∞—è —Å–º–µ—Å—å',
            nutrition: '–±–µ–ª–∫–∏ - 22 –≥, –∂–∏—Ä—ã - 11 –≥',
            calories: '260 –∫–∫–∞–ª/1190 –∫–î–∂',
            storage: '20 —Å—É—Ç–æ–∫'
        },
        {
            id: 'okorok-vino',
            name: '–û–∫–æ—Ä–æ–∫ –æ–ª–µ–Ω—è —Ç–æ–º–ª–µ–Ω—ã–π —Å –≤–∏–Ω–æ–º –∏ –ø—Ä—è–Ω—ã–º–∏ —Ç—Ä–∞–≤–∞–º–∏',
            price: 4480,
            unit: '/–∫–≥',
            maxQty: 5,
            image: 'üî•',
            composition: '–æ–∫–æ—Ä–æ–∫ —Å–µ–≤–µ—Ä–Ω–æ–≥–æ –æ–ª–µ–Ω—è –≤—ã—Å—à–∏–π —Å–æ—Ä—Ç, —Å–∞—Ö–∞—Ä, —Å–æ–µ–≤—ã–π —Å–æ—É—Å, —Å–æ–ª—å –ø–æ–≤–∞—Ä–µ–Ω–Ω–∞—è –ø–∏—â–µ–≤–∞—è, —Ç–∏–º—å—è–Ω, —Ä–æ–∑–º–∞—Ä–∏–Ω',
            nutrition: '–±–µ–ª–∫–∏ - 22 –≥, –∂–∏—Ä—ã - 6 –≥',
            calories: '160 –∫–∫–∞–ª/620 –∫–î–∂',
            storage: '20 —Å—É—Ç–æ–∫'
        },
        {
            id: 'okorok-trufel',
            name: '–û–∫–æ—Ä–æ–∫ –æ–ª–µ–Ω—è —Ç–æ–º–ª–µ–Ω—ã–π —Å —Ç—Ä—é—Ñ–µ–ª–µ–º',
            price: 4600,
            unit: '/–∫–≥',
            maxQty: 5,
            image: 'üî•',
            composition: '–æ–∫–æ—Ä–æ–∫ —Å–µ–≤–µ—Ä–Ω–æ–≥–æ –æ–ª–µ–Ω—è –≤—ã—Å—à–∏–π —Å–æ—Ä—Ç, –º–∞—Ä–∏–Ω–∞–¥ (—Å–æ—É—Å –≤–æ—Ä—á–µ—Å—Ç–µ—Ä, Guinness), —Ç—Ä—é—Ñ–µ–ª—å —á–µ—Ä–Ω—ã–π 0,02%, —Å–º–µ—Å—å —Å–ø–µ—Ü–∏–π (—Ä–æ–∑–º–∞—Ä–∏–Ω, –º—É—Å–∫–∞—Ç–Ω—ã–π –æ—Ä–µ—Ö, –∞–Ω–∏—Å), —Å–æ–ª—å –ø–æ–≤–∞—Ä–µ–Ω–Ω–∞—è –ø–∏—â–µ–≤–∞—è',
            nutrition: '–±–µ–ª–∫–∏ - 22 –≥, –∂–∏—Ä—ã - 6 –≥',
            calories: '160 –∫–∫–∞–ª/620 –∫–î–∂',
            storage: '20 —Å—É—Ç–æ–∫'
        },
        {
            id: 'pastrami-trufel',
            name: '–ü–∞—Å—Ç—Ä–∞–º–∏ –∏–∑ –æ–∫–æ—Ä–æ–∫–∞ –æ–ª–µ–Ω—è —Å —Ç—Ä—é—Ñ–µ–ª–µ–º',
            price: 4630,
            unit: '/–∫–≥',
            maxQty: 5,
            image: 'üî•',
            composition: '–æ–∫–æ—Ä–æ–∫ —Å–µ–≤–µ—Ä–Ω–æ–≥–æ –æ–ª–µ–Ω—è –≤—ã—Å—à–∏–π —Å–æ—Ä—Ç, —Å–º–µ—Å—å —Å–ø–µ—Ü–∏–π (—Ç–∏–º—å—è–Ω, —Ä–æ–∑–º–∞—Ä–∏–Ω, –∫–æ—Ä–∏–∞–Ω–¥—Ä), –º–∞—Ä–∏–Ω–∞–¥ (–≤–∏–Ω–æ –∫—Ä–∞—Å–Ω–æ–µ —Å—É—Ö–æ–µ, –º—ë–¥), —Å–æ–ª—å –ø–æ–≤–∞—Ä–µ–Ω–Ω–∞—è –ø–∏—â–µ–≤–∞—è',
            nutrition: '–±–µ–ª–∫–∏ - 22 –≥, –∂–∏—Ä—ã - 6 –≥',
            calories: '160 –∫–∫–∞–ª/620 –∫–î–∂',
            storage: '20 —Å—É—Ç–æ–∫'
        }
    ],
    'zamorozhennye': [
        {
            id: 'pelmeni-severnye',
            name: '–ü–µ–ª—å–º–µ–Ω–∏ ¬´–°–µ–≤–µ—Ä–Ω—ã–µ¬ª —Å —Ç—Ä—é—Ñ–µ–ª–µ–º',
            price: 758,
            unit: '/500 –≥—Ä.',
            maxQty: 8,
            image: '‚ùÑÔ∏è',
            composition: '—Ñ–∞—Ä—à - –æ–ª–µ–Ω–∏–Ω–∞, —Å–æ–ª—å, –ø–µ—Ä–µ—Ü, —Ç—Ä—é—Ñ–µ–ª—å–Ω–æ–µ –º–∞—Å–ª–æ, –¢–µ—Å—Ç–æ - –º—É–∫–∞ –ø—à–µ–Ω–∏—á–Ω–∞—è –≤/—Å, –≤–æ–¥–∞, —Å–æ–ª—å, —è–∏—á–Ω—ã–π –º–µ–ª–∞–Ω–∂, –º–∞—Å–ª–æ —Ä–∞—Å—Ç–∏—Ç–µ–ª—å–Ω–æ–µ',
            nutrition: '–±–µ–ª–∫–∏ - 16 –≥, –∂–∏—Ä—ã - 12 –≥, —É–≥–ª–µ–≤–æ–¥—ã - 28 –≥',
            calories: '220 –∫–∫–∞–ª/921 –∫–î–∂',
            storage: '10 –º–µ—Å—è—Ü–µ–≤'
        },
        {
            id: 'pelmeni-taymyrskie',
            name: '–ü–µ–ª—å–º–µ–Ω–∏ ¬´–¢–∞–π–º—ã—Ä—Å–∫–∏–µ¬ª',
            price: 758,
            unit: '/500 –≥—Ä.',
            maxQty: 8,
            image: '‚ùÑÔ∏è',
            composition: '–æ–ª–µ–Ω–∏–Ω–∞, –ª—É–∫, –≤–æ–¥–∞, —Å–æ–ª—å –ø–æ–≤–∞—Ä–µ–Ω–Ω–∞—è, –ø–µ—Ä–µ—Ü —á—ë—Ä–Ω—ã–π –º–æ–ª–æ—Ç—ã–π. –¢–µ—Å—Ç–æ ‚Äì –º—É–∫–∞ –ø—à–µ–Ω–∏—á–Ω–∞—è –≤/—Å, –≤–æ–¥–∞, —Å–æ–ª—å, —è–∏—á–Ω—ã–π –º–µ–ª–∞–Ω–∂, –º–∞—Å–ª–æ —Ä–∞—Å—Ç–∏—Ç–µ–ª—å–Ω–æ–µ',
            nutrition: '–±–µ–ª–∫–∏ - 22 –≥, –∂–∏—Ä—ã - 6 –≥, —É–≥–ª–µ–≤–æ–¥—ã - 28 –≥',
            calories: '220 –∫–∫–∞–ª/921 –∫–î–∂',
            storage: '10 –º–µ—Å—è—Ü–µ–≤'
        },
        {
            id: 'pelmeni-los-griby',
            name: '–ü–µ–ª—å–º–µ–Ω–∏ —Å –º—è—Å–æ–º –ª–æ—Å—è –∏ –≥—Ä–∏–±–∞–º–∏',
            price: 780,
            unit: '/500 –≥—Ä.',
            maxQty: 8,
            image: '‚ùÑÔ∏è',
            composition: '–º—è—Å–æ –ª–æ—Å—è, –≥–æ–≤—è–∂–∏–π –∂–∏—Ä, –ª—É–∫, –≤–æ–¥–∞, –ø–µ—Ä–µ—Ü —á–µ—Ä–Ω—ã–π –º–æ–ª–æ—Ç—ã–π, —Å–æ–ª—å –ø–æ–≤–∞—Ä–µ–Ω–Ω–∞—è, –≥—Ä–∏–±—ã —à–∞–º–ø–∏–Ω—å–æ–Ω—ã. –¢–µ—Å—Ç–æ: –º—É–∫–∞ –≤/—Å, –≤–æ–¥–∞, —è–∏—á–Ω—ã–π –º–µ–ª–∞–Ω–∂, —Å–æ–ª—å –ø–æ–≤–∞—Ä–µ–Ω–Ω–∞—è, –º–∞—Å–ª–æ —Ä–∞—Å—Ç–∏—Ç–µ–ª—å–Ω–æ–µ',
            nutrition: '–±–µ–ª–∫–∏ - 16 –≥, –∂–∏—Ä—ã - 12 –≥, —É–≥–ª–µ–≤–æ–¥—ã - 28 –≥',
            calories: '220 –∫–∫–∞–ª/921 –∫–î–∂',
            storage: '10 –º–µ—Å—è—Ü–µ–≤'
        },
        {
            id: 'pelmeni-chernye',
            name: '–ü–µ–ª—å–º–µ–Ω–∏ —á—ë—Ä–Ω—ã–µ –∏–∑ –æ–ª–µ–Ω–∏–Ω—ã —Å —Ç—Ä—é—Ñ–µ–ª–µ–º (—Ä—É—á–Ω–∞—è –ª–µ–ø–∫–∞)',
            price: 960,
            unit: '/500 –≥—Ä.',
            maxQty: 6,
            image: '‚ùÑÔ∏è',
            composition: '—Ñ–∞—Ä—à - –æ–ª–µ–Ω–∏–Ω–∞, –º–∞—Å–ª–æ —Å–ª–∏–≤–æ—á–Ω–æ–µ, –µ–∂–µ–≤–∏–∫–∞, —Å–æ–ª—å, –º—É—Å–∫–∞—Ç–Ω—ã–π –æ—Ä–µ—Ö, –æ—Ä–µ–≥–∞–Ω–æ, —Ç—Ä—é—Ñ–µ–ª—å -0,02%, –¢–µ—Å—Ç–æ ‚Äì –º—É–∫–∞ –ø—à–µ–Ω–∏—á–Ω–∞—è –≤/—Å, –≤–æ–¥–∞, —Å–æ–ª—å, —è–∏—á–Ω—ã–π –º–µ–ª–∞–Ω–∂, —á–µ—Ä–Ω–∏–ª–∞ –∫–∞—Ä–∞–∫–∞—Ç–∏—Ü—ã',
            nutrition: '–±–µ–ª–∫–∏ - 22 –≥, –∂–∏—Ä—ã - 6 –≥, —É–≥–ª–µ–≤–æ–¥—ã - 28 –≥',
            calories: '220 –∫–∫–∞–ª/921 –∫–î–∂',
            storage: '10 –º–µ—Å—è—Ü–µ–≤'
        }
    ],
    'polufabrikaty': [
        {
            id: 'okorok-olene',
            name: '–û–∫–æ—Ä–æ–∫ –æ–ª–µ–Ω—è',
            price: 1970,
            unit: '/–∫–≥',
            maxQty: 6,
            image: 'ü•ì',
            composition: '–æ–ª–µ–Ω–∏–Ω–∞ –æ–∫–æ—Ä–æ–∫ –≤—ã—Å—à–∏–π —Å–æ—Ä—Ç',
            nutrition: '–±–µ–ª–∫–∏ - 22 –≥, –∂–∏—Ä—ã - 11 –≥',
            calories: '260 –∫–∫–∞–ª/1190 –∫–î–∂',
            storage: '10 –º–µ—Å—è—Ü–µ–≤'
        },
        {
            id: 'vyrezka-olene',
            name: '–í—ã—Ä–µ–∑–∫–∞ –æ–ª–µ–Ω—è',
            price: 3160,
            unit: '/–∫–≥',
            maxQty: 4,
            image: 'ü•ì',
            composition: '–≤—ã—Ä–µ–∑–∫–∞ –æ–ª–µ–Ω—è –≤—ã—Å—à–∏–π —Å–æ—Ä—Ç',
            nutrition: '–ë–µ–ª–∫–∏ - 22 –≥, –ñ–∏—Ä—ã - 11 –≥',
            calories: '260 –∫–∫–∞–ª/1190 –∫–î–∂',
            storage: '10 –º–µ—Å—è—Ü–µ–≤'
        },
        {
            id: 'koreyka-kost',
            name: '–ö–æ—Ä–µ–π–∫–∞ –æ–ª–µ–Ω—è –Ω–∞ –∫–æ—Å—Ç–∏',
            price: 3310,
            unit: '/–∫–≥',
            maxQty: 4,
            image: 'ü•ì',
            composition: '–∫–æ—Ä–µ–π–∫–∞ –æ–ª–µ–Ω—è –≤—ã—Å—à–∏–π —Å–æ—Ä—Ç',
            nutrition: '–ë–µ–ª–∫–∏ - 22 –≥, –ñ–∏—Ä—ã - 11 –≥',
            calories: '260 –∫–∫–∞–ª/1190 –∫–î–∂',
            storage: '10 –º–µ—Å—è—Ü–µ–≤'
        },
        {
            id: 'kupaty-piknik',
            name: '–ö—É–ø–∞—Ç—ã "–ü–∏–∫–Ω–∏–∫"',
            price: 1268,
            unit: '/–∫–≥',
            maxQty: 8,
            image: 'ü•ì',
            composition: '–æ–ª–µ–Ω–∏–Ω–∞, —à–ø–∏–∫, —á–µ—Å–Ω–æ–∫, —Å–∞—Ö–∞—Ä, —ç–∫—Å—Ç—Ä–∞–∫—Ç—ã –ø—Ä—è–Ω–æ—Å—Ç–µ–π, –∫–æ—Ä–∏–∞–Ω–¥—Ä, —á–µ—Ä–Ω—ã–π –ø–µ—Ä–µ—Ü, —Å–æ–ª—å –ø–æ–≤–∞—Ä–µ–Ω–Ω–∞—è –ø–∏—â–µ–≤–∞—è',
            nutrition: '–±–µ–ª–∫–∏ - 15,0 –≥, –∂–∏—Ä—ã - 21,0 –≥, —É–≥–ª–µ–≤–æ–¥—ã - 1,5 –≥',
            calories: '260 –∫–∫–∞–ª/1090 –∫–î–∂',
            storage: '12 –º–µ—Å—è—Ü–µ–≤'
        },
        {
            id: 'kupaty-tundra',
            name: '–ö—É–ø–∞—Ç—ã "–¢—É–Ω–¥—Ä–∞"',
            price: 1268,
            unit: '/–∫–≥',
            maxQty: 8,
            image: 'ü•ì',
            composition: '–æ–ª–µ–Ω–∏–Ω–∞, —à–ø–∏–∫, –ª—É–∫, —Å–∞—Ö–∞—Ä, —ç–∫—Å—Ç—Ä–∞–∫—Ç—ã –ø—Ä—è–Ω–æ—Å—Ç–µ–π, —Å–æ–ª—å –ø–æ–≤–∞—Ä–µ–Ω–Ω–∞—è –ø–∏—â–µ–≤–∞—è',
            nutrition: '–±–µ–ª–∫–∏ - 15 –≥, –∂–∏—Ä—ã - 21 –≥, —É–≥–ª–µ–≤–æ–¥—ã - 1 –≥',
            calories: '250 –∫–∫–∞–ª/1050 –∫–î–∂',
            storage: '12 –º–µ—Å—è—Ü–µ–≤'
        },
        {
            id: 'kotleti-burger',
            name: '–ö–æ—Ç–ª–µ—Ç—ã –¥–ª—è –±—É—Ä–≥–µ—Ä–∞ –∏–∑ –º—è—Å–∞ —Å–µ–≤–µ—Ä–Ω–æ–≥–æ –æ–ª–µ–Ω—è',
            price: 290,
            unit: '/300 –≥—Ä. (2 —à—Ç—É–∫–∏)',
            maxQty: 10,
            image: 'ü•ì',
            composition: '–º—è—Å–æ —Å–µ–≤–µ—Ä–Ω–æ–≥–æ –æ–ª–µ–Ω—è —Ä—É–±–ª–µ–Ω–Ω–æ–µ, –∂–∏—Ä –æ–ª–µ–Ω–∏–π',
            nutrition: '–ë–µ–ª–∫–∏ - 17 –≥, –ñ–∏—Ä—ã - 12 –≥',
            calories: '270 –∫–∫–∞–ª/980 –∫–î–∂',
            storage: '10 –º–µ—Å—è—Ü–µ–≤'
        },
        {
            id: 'lopatka-olene',
            name: '–õ–æ–ø–∞—Ç–∫–∞ –æ–ª–µ–Ω—è –±–µ–∑ –∫–æ—Å—Ç–∏',
            price: 1770,
            unit: '/–∫–≥',
            maxQty: 6,
            image: 'ü•ì',
            composition: '–æ–ª–µ–Ω–∏–Ω–∞ –ª–æ–ø–∞—Ç–æ—á–Ω–∞—è —á–∞—Å—Ç—å –±–µ–∑ –∫–æ—Å—Ç–∏',
            nutrition: '–ë–µ–ª–∫–∏ - 19 –≥, –ñ–∏—Ä—ã - 4 –≥',
            calories: '112 –∫–∫–∞–ª/780 –∫–î–∂',
            storage: '10 –º–µ—Å—è—Ü–µ–≤'
        }
    ],
    'pirogi-sytnye': [
        {
            id: 'pirog-ohotnichiy',
            name: '–ü–∏—Ä–æ–≥ —Å –æ–ª–µ–Ω–∏–Ω–æ–π –æ—Ö–æ—Ç–Ω–∏—á–∏–π',
            price: 880,
            unit: '/550 –≥—Ä.',
            maxQty: 8,
            image: 'ü•ß',
            composition: '–º—É–∫–∞ –≤/—Å, –æ–ª–µ–Ω–∏–Ω–∞ –≤/—Å, —Ç–æ–º–∞—Ç—ã –≤—è–ª–µ–Ω—ã–µ, –º–∞—Å–ª–æ –æ–ª–∏–≤–∫–æ–≤–æ–µ, —Å–æ–ª—å, —Å–∞—Ö–∞—Ä, —è–π—Ü–æ, –≤–æ–¥–∞, –¥—Ä–æ–∂–∂–∏ —Ö–ª–µ–±–æ–ø–µ–∫–∞—Ä–Ω—ã–µ, –ª—É–∫ —Ä–µ–ø—á–∞—Ç—ã–π, –º–æ—Ä–∫–æ–≤—å, —Å–ø–µ—Ü–∏–∏',
            nutrition: '–ë–µ–ª–∫–∏ 11.55 –≥, –ñ–∏—Ä—ã 9.32 –≥, –£–≥–ª–µ–≤–æ–¥—ã 25.24 –≥',
            calories: '232.8 –∫–∫–∞–ª/974.1 –∫–î–∂',
            storage: '6 –º–µ—Å—è—Ü–µ–≤'
        },
        {
            id: 'pirog-brusnika',
            name: '–ü–∏—Ä–æ–≥ —Å –æ–ª–µ–Ω–∏–Ω–æ–π –∏ –±—Ä—É—Å–Ω–∏–∫–æ–π',
            price: 880,
            unit: '/550 –≥—Ä.',
            maxQty: 8,
            image: 'ü•ß',
            composition: '–º—É–∫–∞ –≤/—Å, –æ–ª–µ–Ω–∏–Ω–∞ –≤/—Å, –±—Ä—É—Å–Ω–∏–∫–∞, —Å–æ–µ–≤—ã–π —Å–æ—É—Å, —Å–æ–ª—å, —Å–∞—Ö–∞—Ä, —è–π—Ü–æ, –≤–æ–¥–∞, –¥—Ä–æ–∂–∂–∏ —Ö–ª–µ–±–æ–ø–µ–∫–∞—Ä–Ω—ã–µ, –º–∞—Å–ª–æ —Ä–∞—Å—Ç–∏—Ç–µ–ª—å–Ω–æ–µ, –ª—É–∫ —Ä–µ–ø—á–∞—Ç—ã–π, —Å–ø–µ—Ü–∏–∏',
            nutrition: '–ë–µ–ª–∫–∏ 14.02 –≥, –ñ–∏—Ä—ã 9.12 –≥, –£–≥–ª–µ–≤–æ–¥—ã 23.42 –≥',
            calories: '233.2 –∫–∫–∞–ª/917.6 –∫–î–∂',
            storage: '6 –º–µ—Å—è—Ü–µ–≤'
        },
        {
            id: 'pirog-griby-trufel',
            name: '–ü–∏—Ä–æ–≥ —Å –æ–ª–µ–Ω–∏–Ω–æ–π, –≥—Ä–∏–±–∞–º–∏ –∏ —Ç—Ä—é—Ñ–µ–ª–µ–º',
            price: 880,
            unit: '/550 –≥—Ä.',
            maxQty: 8,
            image: 'ü•ß',
            composition: '–º—É–∫–∞ –≤/—Å, –æ–ª–µ–Ω–∏–Ω–∞ –≤/—Å, —à–∞–º–ø–∏–Ω—å–æ–Ω—ã —Å–≤–µ–∂–∏–µ, —Ç—Ä—é—Ñ–µ–ª—å–Ω–∞—è –ø–∞—Å—Ç–∞, –º–∞—Å–ª–æ –æ–ª–∏–≤–∫–æ–≤–æ–µ, —Å–æ–ª—å, —Å–∞—Ö–∞—Ä, —è–π—Ü–æ, –≤–æ–¥–∞, –¥—Ä–æ–∂–∂–∏ —Ö–ª–µ–±–æ–ø–µ–∫–∞—Ä–Ω—ã–µ, –ª—É–∫ —Ä–µ–ø—á–∞—Ç—ã–π, —Å–ø–µ—Ü–∏–∏',
            nutrition: '–ë–µ–ª–∫–∏ 13.02 –≥, –ñ–∏—Ä—ã 9.31 –≥, –£–≥–ª–µ–≤–æ–¥—ã 25.42 –≥',
            calories: '235.2 –∫–∫–∞–ª/921.4 –∫–î–∂',
            storage: '6 –º–µ—Å—è—Ü–µ–≤'
        },
        {
            id: 'pirog-gribnoy',
            name: '–ü–∏—Ä–æ–≥ —Å –≥—Ä–∏–±–Ω—ã–º –∂—é–ª—å–µ–Ω–æ–º',
            price: 964,
            unit: '/700 –≥—Ä.',
            maxQty: 6,
            image: 'ü•ß',
            composition: '–º—É–∫–∞ –≤/—Å, —à–∞–º–ø–∏–Ω—å–æ–Ω—ã —Å–≤–µ–∂–∏–µ, —Å–ª–∏–≤–∫–∏ –Ω–∞—Ç—É—Ä–∞–ª—å–Ω—ã–µ, —Å–æ–ª—å, —Å–∞—Ö–∞—Ä, —è–π—Ü–æ, –≤–æ–¥–∞, –¥—Ä–æ–∂–∂–∏ —Ö–ª–µ–±–æ–ø–µ–∫–∞—Ä–Ω—ã–µ, –º–∞—Å–ª–æ —Ä–∞—Å—Ç–∏—Ç–µ–ª—å–Ω–æ–µ, –ª—É–∫ —Ä–µ–ø—á–∞—Ç—ã–π, —Å–ø–µ—Ü–∏–∏',
            nutrition: '–ë–µ–ª–∫–∏ 8.8 –≥, –ñ–∏—Ä—ã 8.9 –≥, –£–≥–ª–µ–≤–æ–¥—ã 22.6 –≥',
            calories: '241.2 –∫–∫–∞–ª/1009.68 –∫–î–∂',
            storage: '6 –º–µ—Å—è—Ü–µ–≤'
        },
        {
            id: 'pirog-kuritsa-griby',
            name: '–ü–∏—Ä–æ–≥ —Å –∫—É—Ä–∏—Ü–µ–π –∏ –≥—Ä–∏–±–∞–º–∏',
            price: 980,
            unit: '/700 –≥—Ä.',
            maxQty: 6,
            image: 'ü•ß',
            composition: '–º—É–∫–∞ –≤/—Å, –∫—É—Ä–∏–Ω–æ–µ —Ñ–∏–ª–µ, —à–∞–º–ø–∏–Ω—å–æ–Ω—ã —Å–≤–µ–∂–∏–µ, —Å–æ–ª—å, —Å–∞—Ö–∞—Ä, —è–π—Ü–æ, –≤–æ–¥–∞, –¥—Ä–æ–∂–∂–∏ —Ö–ª–µ–±–æ–ø–µ–∫–∞—Ä–Ω—ã–µ, –º–∞—Å–ª–æ —Ä–∞—Å—Ç–∏—Ç–µ–ª—å–Ω–æ–µ, –ª—É–∫ —Ä–µ–ø—á–∞—Ç—ã–π, —Å–ø–µ—Ü–∏–∏',
            nutrition: '–ë–µ–ª–∫–∏ 11.4 –≥, –ñ–∏—Ä—ã 2.8 –≥, –£–≥–ª–µ–≤–æ–¥—ã 24.5 –≥',
            calories: '255.3 –∫–∫–∞–ª/1085 –∫–î–∂',
            storage: '6 –º–µ—Å—è—Ü–µ–≤'
        },
        {
            id: 'pirog-kartofel-griby',
            name: '–ü–∏—Ä–æ–≥ —Å –∫–∞—Ä—Ç–æ—Ñ–µ–ª–µ–º –∏ –≥—Ä–∏–±–∞–º–∏',
            price: 922,
            unit: '/700 –≥—Ä.',
            maxQty: 6,
            image: 'ü•ß',
            composition: '–º—É–∫–∞ –≤/—Å, –∫–∞—Ä—Ç–æ—Ñ–µ–ª—å, —à–∞–º–ø–∏–Ω—å–æ–Ω—ã —Å–≤–µ–∂–∏–µ, —Å–æ–ª—å, —Å–∞—Ö–∞—Ä, —è–π—Ü–æ, –≤–æ–¥–∞, –¥—Ä–æ–∂–∂–∏ —Ö–ª–µ–±–æ–ø–µ–∫–∞—Ä–Ω—ã–µ, –º–∞—Å–ª–æ —Ä–∞—Å—Ç–∏—Ç–µ–ª—å–Ω–æ–µ, –ª—É–∫ —Ä–µ–ø—á–∞—Ç—ã–π, —Å–ø–µ—Ü–∏–∏',
            nutrition: '–ë–µ–ª–∫–∏ 4.6 –≥, –ñ–∏—Ä—ã 7.8 –≥, –£–≥–ª–µ–≤–æ–¥—ã 18.4 –≥',
            calories: '154.8 –∫–∫–∞–ª/904 –∫–î–∂',
            storage: '6 –º–µ—Å—è—Ü–µ–≤'
        },
        {
            id: 'pirog-krasnaya-ryba',
            name: '–ü–∏—Ä–æ–≥ —Å –∫—Ä–∞—Å–Ω–æ–π —Ä—ã–±–æ–π',
            price: 2460,
            unit: '/700 –≥—Ä.',
            maxQty: 4,
            image: 'ü•ß',
            composition: '–º—É–∫–∞ –≤/—Å, —Å–µ–º–≥–∞ (–ª–æ—Å–æ—Å—å), —Å–æ–ª—å, —Å–∞—Ö–∞—Ä, —è–π—Ü–æ, –≤–æ–¥–∞, –¥—Ä–æ–∂–∂–∏ —Ö–ª–µ–±–æ–ø–µ–∫–∞—Ä–Ω—ã–µ, –º–∞—Å–ª–æ —Ä–∞—Å—Ç–∏—Ç–µ–ª—å–Ω–æ–µ, –ª—É–∫ —Ä–µ–ø—á–∞—Ç—ã–π, —Å–ø–µ—Ü–∏–∏',
            nutrition: '–ë–µ–ª–∫–∏ 14.9 –≥, –ñ–∏—Ä—ã 13 –≥, –£–≥–ª–µ–≤–æ–¥—ã 24.6 –≥',
            calories: '274.7 –∫–∫–∞–ª/1150.4 –∫–î–∂',
            storage: '6 –º–µ—Å—è—Ü–µ–≤'
        }
    ],
    'pirogi-sladkie': [
        {
            id: 'pirog-yabloko-smorodina',
            name: '–ü–∏—Ä–æ–≥ —Å —è–±–ª–æ–∫–æ–º –∏ —á–µ—Ä–Ω–æ–π —Å–º–æ—Ä–æ–¥–∏–Ω–æ–π',
            price: 860,
            unit: '/700 –≥—Ä.',
            maxQty: 6,
            image: 'üßÅ',
            composition: '–º—É–∫–∞ –≤/—Å, —è–±–ª–æ–∫–∏ –Ω–∞—Ç—É—Ä–∞–ª—å–Ω—ã–µ, —á–µ—Ä–Ω–∞—è —Å–º–æ—Ä–æ–¥–∏–Ω–∞ –Ω–∞—Ç—É—Ä–∞–ª—å–Ω–∞—è, —Å–æ–ª—å, —Å–∞—Ö–∞—Ä, —è–π—Ü–æ, –≤–æ–¥–∞, –º–∞—Å–ª–æ —Ä–∞—Å—Ç–∏—Ç–µ–ª—å–Ω–æ–µ, –¥—Ä–æ–∂–∂–∏ —Ö–ª–µ–±–æ–ø–µ–∫–∞—Ä–Ω—ã–µ',
            nutrition: '–ë–µ–ª–∫–∏ 6.2 –≥, –ñ–∏—Ä—ã 5.4 –≥, –£–≥–ª–µ–≤–æ–¥—ã 52.8 –≥',
            calories: '251.4 –∫–∫–∞–ª/1163.3 –∫–î–∂',
            storage: '6 –º–µ—Å—è—Ü–µ–≤'
        },
        {
            id: 'pirog-vishnya',
            name: '–ü–∏—Ä–æ–≥ —Å –≤–∏—à–Ω–µ–π',
            price: 885,
            unit: '/700 –≥—Ä.',
            maxQty: 6,
            image: 'üßÅ',
            composition: '–º—É–∫–∞ –≤/—Å, –≤–∏—à–Ω—è –Ω–∞—Ç—É—Ä–∞–ª—å–Ω–∞—è, —Å–æ–ª—å, —Å–∞—Ö–∞—Ä, —è–π—Ü–æ, –≤–æ–¥–∞, –º–∞—Å–ª–æ —Ä–∞—Å—Ç–∏—Ç–µ–ª—å–Ω–æ–µ, –¥—Ä–æ–∂–∂–∏ —Ö–ª–µ–±–æ–ø–µ–∫–∞—Ä–Ω—ã–µ',
            nutrition: '–ë–µ–ª–∫–∏ 6.5 –≥, –ñ–∏—Ä—ã 5.8 –≥, –£–≥–ª–µ–≤–æ–¥—ã 52.4 –≥',
            calories: '285.4 –∫–∫–∞–ª/1195.4 –∫–î–∂',
            storage: '6 –º–µ—Å—è—Ü–µ–≤'
        },
        {
            id: 'pirog-tvorog-klubnika',
            name: '–ü–∏—Ä–æ–≥ —Å —Ç–≤–æ—Ä–æ–≥–æ–º –∏ –∫–ª—É–±–Ω–∏–∫–æ–π',
            price: 874,
            unit: '/700 –≥—Ä.',
            maxQty: 6,
            image: 'üßÅ',
            composition: '–º—É–∫–∞ –≤/—Å, –∫–ª—É–±–Ω–∏–∫–∞ –Ω–∞—Ç—É—Ä–∞–ª—å–Ω–∞—è, –∫—Ä–µ–º –≤–∞–Ω–∏–ª—å–Ω–æ-—Å–ª–∏–≤–æ—á–Ω—ã–π –∑–∞–≤–∞—Ä–Ω–æ–π, —Å–æ–ª—å, —Å–∞—Ö–∞—Ä, —è–π—Ü–æ, –≤–æ–¥–∞, –º–∞—Å–ª–æ —Ä–∞—Å—Ç–∏—Ç–µ–ª—å–Ω–æ–µ, –¥—Ä–æ–∂–∂–∏ —Ö–ª–µ–±–æ–ø–µ–∫–∞—Ä–Ω—ã–µ',
            nutrition: '–ë–µ–ª–∫–∏ 8.3 –≥, –ñ–∏—Ä—ã 7.1 –≥, –£–≥–ª–µ–≤–æ–¥—ã 38.4 –≥',
            calories: '285.6 –∫–∫–∞–ª/1049.2 –∫–î–∂',
            storage: '6 –º–µ—Å—è—Ü–µ–≤'
        },
        {
            id: 'pirog-tvorog-chernika',
            name: '–ü–∏—Ä–æ–≥ —Å —Ç–≤–æ—Ä–æ–≥–æ–º –∏ —á–µ—Ä–Ω–∏–∫–æ–π',
            price: 878,
            unit: '/700 –≥—Ä.',
            maxQty: 6,
            image: 'üßÅ',
            composition: '–º—É–∫–∞ –≤/—Å, —á–µ—Ä–Ω–∏–∫–∞ –Ω–∞—Ç—É—Ä–∞–ª—å–Ω–∞—è, –∫—Ä–µ–º –≤–∞–Ω–∏–ª—å–Ω–æ-—Å–ª–∏–≤–æ—á–Ω—ã–π –∑–∞–≤–∞—Ä–Ω–æ–π —Å–æ–ª—å, —Å–∞—Ö–∞—Ä, —è–π—Ü–æ, –≤–æ–¥–∞, –º–∞—Å–ª–æ —Ä–∞—Å—Ç–∏—Ç–µ–ª—å–Ω–æ–µ, –¥—Ä–æ–∂–∂–∏ —Ö–ª–µ–±–æ–ø–µ–∫–∞—Ä–Ω—ã–µ',
            nutrition: '–ë–µ–ª–∫–∏ 8.2 –≥, –ñ–∏—Ä—ã 6.8 –≥, –£–≥–ª–µ–≤–æ–¥—ã 37.8 –≥',
            calories: '258.6 –∫–∫–∞–ª/1049.2 –∫–î–∂',
            storage: '6 –º–µ—Å—è—Ü–µ–≤'
        },
        {
            id: 'pirog-tvorog-malina',
            name: '–ü–∏—Ä–æ–≥ —Å —Ç–≤–æ—Ä–æ–≥–æ–º –∏ –º–∞–ª–∏–Ω–æ–π',
            price: 880,
            unit: '/700 –≥—Ä.',
            maxQty: 6,
            image: 'üßÅ',
            composition: '–º—É–∫–∞ –≤/—Å, –º–∞–ª–∏–Ω–∞ –Ω–∞—Ç—É—Ä–∞–ª—å–Ω–∞—è, –∫—Ä–µ–º –≤–∞–Ω–∏–ª—å–Ω–æ-—Å–ª–∏–≤–æ—á–Ω—ã–π –∑–∞–≤–∞—Ä–Ω–æ–π, —Å–æ–ª—å, —Å–∞—Ö–∞—Ä, —è–π—Ü–æ, –≤–æ–¥–∞, –º–∞—Å–ª–æ —Ä–∞—Å—Ç–∏—Ç–µ–ª—å–Ω–æ–µ, –¥—Ä–æ–∂–∂–∏ —Ö–ª–µ–±–æ–ø–µ–∫–∞—Ä–Ω—ã–µ',
            nutrition: '–ë–µ–ª–∫–∏ 8.4 –≥, –ñ–∏—Ä—ã 7.2 –≥, –£–≥–ª–µ–≤–æ–¥—ã 38.1 –≥',
            calories: '250.8 –∫–∫–∞–ª/1050 –∫–î–∂',
            storage: '6 –º–µ—Å—è—Ü–µ–≤'
        },
        {
            id: 'pirog-chernika',
            name: '–ü–∏—Ä–æ–≥ —Å —á–µ—Ä–Ω–∏–∫–æ–π',
            price: 885,
            unit: '/700 –≥—Ä.',
            maxQty: 6,
            image: 'üßÅ',
            composition: '–º—É–∫–∞ –≤/—Å, —á–µ—Ä–Ω–∏–∫–∞ –Ω–∞—Ç—É—Ä–∞–ª—å–Ω–∞—è, —Å–æ–ª—å, —Å–∞—Ö–∞—Ä, —è–π—Ü–æ, –≤–æ–¥–∞, –º–∞—Å–ª–æ —Ä–∞—Å—Ç–∏—Ç–µ–ª—å–Ω–æ–µ, –¥—Ä–æ–∂–∂–∏ —Ö–ª–µ–±–æ–ø–µ–∫–∞—Ä–Ω—ã–µ',
            nutrition: '–ë–µ–ª–∫–∏ 2.7 –≥, –ñ–∏—Ä—ã 9.9 –≥, –£–≥–ª–µ–≤–æ–¥—ã 33.4 –≥',
            calories: '245.8 –∫–∫–∞–ª/1026.18 –∫–î–∂',
            storage: '6 –º–µ—Å—è—Ü–µ–≤'
        },
        {
            id: 'pirog-yabloko-brusnika',
            name: '–ü–∏—Ä–æ–≥ —Å —è–±–ª–æ–∫–æ–º –∏ –±—Ä—É—Å–Ω–∏–∫–æ–π',
            price: 868,
            unit: '/700 –≥—Ä.',
            maxQty: 6,
            image: 'üßÅ',
            composition: '–º—É–∫–∞ –≤/—Å, –±—Ä—É—Å–Ω–∏–∫–∞ –Ω–∞—Ç—É—Ä–∞–ª—å–Ω–∞—è, —è–±–ª–æ–∫–∏ –Ω–∞—Ç—É—Ä–∞–ª—å–Ω—ã–µ, —Å–æ–ª—å, —Å–∞—Ö–∞—Ä, —è–π—Ü–æ, –≤–æ–¥–∞, –º–∞—Å–ª–æ —Ä–∞—Å—Ç–∏—Ç–µ–ª—å–Ω–æ–µ, –¥—Ä–æ–∂–∂–∏ —Ö–ª–µ–±–æ–ø–µ–∫–∞—Ä–Ω—ã–µ',
            nutrition: '–ë–µ–ª–∫–∏ 3.5 –≥, –ñ–∏—Ä—ã 4 –≥, –£–≥–ª–µ–≤–æ–¥—ã 35.7 –≥',
            calories: '192.3 –∫–∫–∞–ª/805.25 –∫–î–∂',
            storage: '6 –º–µ—Å—è—Ü–µ–≤'
        },
        {
            id: 'pirog-yabloko',
            name: '–ü–∏—Ä–æ–≥ —Å —è–±–ª–æ–∫–æ–º',
            price: 860,
            unit: '/700 –≥—Ä.',
            maxQty: 6,
            image: 'üßÅ',
            composition: '–º—É–∫–∞ –≤/—Å, —è–±–ª–æ–∫–∏ –Ω–∞—Ç—É—Ä–∞–ª—å–Ω—ã–µ, —Å–æ–ª—å, —Å–∞—Ö–∞—Ä, —è–π—Ü–æ, –≤–æ–¥–∞, –º–∞—Å–ª–æ —Ä–∞—Å—Ç–∏—Ç–µ–ª—å–Ω–æ–µ, –¥—Ä–æ–∂–∂–∏ —Ö–ª–µ–±–æ–ø–µ–∫–∞—Ä–Ω—ã–µ',
            nutrition: '–ë–µ–ª–∫–∏ 9.2 –≥, –ñ–∏—Ä—ã 5.4 –≥, –£–≥–ª–µ–≤–æ–¥—ã 52.8 –≥',
            calories: '258.4 –∫–∫–∞–ª/1184.3 –∫–î–∂',
            storage: '6 –º–µ—Å—è—Ü–µ–≤'
        }
    ]
};

// –§—É–Ω–∫—Ü–∏–∏ –Ω–∞–≤–∏–≥–∞—Ü–∏–∏
function showScreen(screenId) {
    document.querySelectorAll('.screen').forEach(screen => {
        screen.classList.remove('active');
    });
    document.getElementById(screenId).classList.add('active');
    
    // –û–±–Ω–æ–≤–ª—è–µ–º Telegram –∫–Ω–æ–ø–∫–∏
    if (typeof updateMainButton === 'function') {
        updateMainButton(screenId);
    }
}

function showMain() {
    showScreen('main-screen');
    updateWorkStatus();
}

function showCategory(categoryId) {
    currentCategory = categoryId;
    const category = categories.find(c => c.id === categoryId);
    document.getElementById('category-title').textContent = category.name;
    
    const productsList = document.getElementById('products-list');
    productsList.innerHTML = '';
    
    products[categoryId].forEach(product => {
        const productCard = document.createElement('div');
        productCard.className = 'product-card';
        productCard.onclick = () => showProductDetail(categoryId, product.id);
        
        // –û–ø—Ä–µ–¥–µ–ª—è–µ–º, —á—Ç–æ –æ—Ç–æ–±—Ä–∞–∂–∞—Ç—å: –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∏–ª–∏ —ç–º–æ–¥–∑–∏
        const imageContent = product.imageUrl ? 
            `<img src="${product.imageUrl}" alt="${product.name}" class="product-image-img" onerror="this.style.display='none'; this.nextElementSibling.style.display='flex';">` : '';
        const emojiContent = `<div class="product-image-emoji">${product.image}</div>`;
        
        productCard.innerHTML = `
            <div class="product-image">
                ${imageContent}
                ${emojiContent}
            </div>
            <div class="product-name">${product.name}</div>
            <div class="product-price">${product.price}‚ÇΩ${product.unit}</div>
            <button class="add-to-cart-btn" onclick="event.stopPropagation(); addToCart('${categoryId}', '${product.id}', 1)">
                –î–æ–±–∞–≤–∏—Ç—å –≤ –∫–æ—Ä–∑–∏–Ω—É
            </button>
        `;
        
        productsList.appendChild(productCard);
    });
    
    showScreen('category-screen');
}

function showProductDetail(categoryId, productId) {
    currentProduct = { categoryId, productId };
    const product = products[categoryId].find(p => p.id === productId);
    
    // –û–ø—Ä–µ–¥–µ–ª—è–µ–º, —á—Ç–æ –æ—Ç–æ–±—Ä–∞–∂–∞—Ç—å: –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∏–ª–∏ —ç–º–æ–¥–∑–∏
    const detailImageContent = product.imageUrl ? 
        `<img src="${product.imageUrl}" alt="${product.name}" class="detail-image-img" onerror="this.style.display='none'; this.nextElementSibling.style.display='flex';">` : '';
    const detailEmojiContent = `<div class="detail-image-emoji">${product.image}</div>`;
    
    document.getElementById('product-detail').innerHTML = `
        <div class="detail-image">
            ${detailImageContent}
            ${detailEmojiContent}
        </div>
        <div class="detail-name">${product.name}</div>
        <div class="detail-price">${product.price}‚ÇΩ${product.unit}</div>
        
        <div class="detail-info">
            <h4>–°–æ—Å—Ç–∞–≤:</h4>
            <p>${product.composition}</p>
            
            <h4>–ü–∏—â–µ–≤–∞—è —Ü–µ–Ω–Ω–æ—Å—Ç—å:</h4>
            <p>${product.nutrition}</p>
            
            <h4>–ö–∞–ª–æ—Ä–∏–π–Ω–æ—Å—Ç—å:</h4>
            <p>${product.calories}</p>
            
            <h4>–°—Ä–æ–∫ —Ö—Ä–∞–Ω–µ–Ω–∏—è:</h4>
            <p>${product.storage}</p>
        </div>
        
        <div class="quantity-selector">
            <button class="qty-btn" onclick="changeDetailQuantity(-1)" id="qty-minus">-</button>
            <div class="qty-display" id="detail-quantity">1</div>
            <button class="qty-btn" onclick="changeDetailQuantity(1)" id="qty-plus">+</button>
        </div>
        
        <button class="add-to-cart-btn" onclick="addFromDetail()">
            –î–æ–±–∞–≤–∏—Ç—å –≤ –∫–æ—Ä–∑–∏–Ω—É
        </button>
    `;

    showScreen('product-detail-screen');
}

// –§—É–Ω–∫—Ü–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏—è –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –≤ –¥–µ—Ç–∞–ª—å–Ω–æ–π –∫–∞—Ä—Ç–æ—á–∫–µ
function changeDetailQuantity(delta) {
    const qtyEl = document.getElementById('detail-quantity');
    const currentQty = parseInt(qtyEl.textContent);
    const product = products[currentProduct.categoryId].find(p => p.id === currentProduct.productId);

    const newQty = Math.max(1, Math.min(product.maxQty, currentQty + delta));
    qtyEl.textContent = newQty;
}

// –§—É–Ω–∫—Ü–∏—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –∏–∑ –¥–µ—Ç–∞–ª—å–Ω–æ–π –∫–∞—Ä—Ç–æ—á–∫–∏
function addFromDetail() {
    const qty = parseInt(document.getElementById('detail-quantity').textContent);
    addToCart(currentProduct.categoryId, currentProduct.productId, qty);
    showNotification('–¢–æ–≤–∞—Ä –¥–æ–±–∞–≤–ª–µ–Ω –≤ –∫–æ—Ä–∑–∏–Ω—É!', 'success');
}

// –§—É–Ω–∫—Ü–∏—è –≤–æ–∑–≤—Ä–∞—Ç–∞ –∏–∑ –¥–µ—Ç–∞–ª—å–Ω–æ–π –∫–∞—Ä—Ç–æ—á–∫–∏
function goBackFromProduct() {
    if (currentCategory) {
        showCategory(currentCategory);
    } else {
        showMain();
    }
}

// –§—É–Ω–∫—Ü–∏—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è —Ç–æ–≤–∞—Ä–∞ –≤ –∫–æ—Ä–∑–∏–Ω—É
function addToCart(categoryId, productId, quantity) {
    if (!isWorkingHours()) {
        showNotification('–ö —Å–æ–∂–∞–ª–µ–Ω–∏—é, —Å–µ–π—á–∞—Å –º—ã –Ω–µ —Ä–∞–±–æ—Ç–∞–µ–º. –ó–∞–∫–∞–∑—ã –ø—Ä–∏–Ω–∏–º–∞—é—Ç—Å—è –µ–∂–µ–¥–Ω–µ–≤–Ω–æ —Å 10:00 –¥–æ 21:00', 'warning');
        return;
    }

    const cartKey = `${categoryId}_${productId}`;
    const product = products[categoryId].find(p => p.id === productId);

    if (!cart[cartKey]) {
        cart[cartKey] = {
            categoryId,
            productId,
            name: product.name,
            price: product.price,
            unit: product.unit,
            image: product.image,
            imageUrl: product.imageUrl,
            maxQty: product.maxQty,
            quantity: 0
        };
    }

    const newQuantity = cart[cartKey].quantity + quantity;
    if (newQuantity > product.maxQty) {
        showNotification(`–ú–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ: ${product.maxQty} —à—Ç.`, 'warning');
        return;
    }

    cart[cartKey].quantity = newQuantity;
    localStorage.setItem('tundra_cart', JSON.stringify(cart));
    updateCartBadge();
}

// –§—É–Ω–∫—Ü–∏—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Å—á–µ—Ç—á–∏–∫–∞ –∫–æ—Ä–∑–∏–Ω—ã
function updateCartBadge() {
    const totalItems = Object.values(cart).reduce((sum, item) => sum + item.quantity, 0);
    document.getElementById('cart-badge').textContent = totalItems;
}

// –§—É–Ω–∫—Ü–∏—è –ø–æ–∫–∞–∑–∞ –∫–æ—Ä–∑–∏–Ω—ã
function showCart() {
    const cartContent = document.getElementById('cart-content');
    const cartItems = Object.values(cart).filter(item => item.quantity > 0);

    if (cartItems.length === 0) {
        cartContent.innerHTML = `
            <div class="empty-cart">
                <div class="empty-cart-icon">üõí</div>
                <div class="empty-cart-title">–ö–æ—Ä–∑–∏–Ω–∞ –ø—É—Å—Ç–∞</div>
                <div class="empty-cart-desc">–î–æ–±–∞–≤—å—Ç–µ —Ç–æ–≤–∞—Ä—ã –∏–∑ –∫–∞—Ç–∞–ª–æ–≥–∞</div>
                <button class="go-shopping-btn" onclick="showMain()">
                    –ü–µ—Ä–µ–π—Ç–∏ –∫ –ø–æ–∫—É–ø–∫–∞–º
                </button>
            </div>
        `;
    } else {
        let cartHTML = '<div style="padding: 20px;">';

        cartItems.forEach(item => {
            // –û–ø—Ä–µ–¥–µ–ª—è–µ–º, —á—Ç–æ –æ—Ç–æ–±—Ä–∞–∂–∞—Ç—å: –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∏–ª–∏ —ç–º–æ–¥–∑–∏
            const cartImageContent = item.imageUrl ? 
                `<img src="${item.imageUrl}" alt="${item.name}" class="cart-item-image-img" onerror="this.style.display='none'; this.nextElementSibling.style.display='flex';">` : '';
            const cartEmojiContent = `<div class="cart-item-image-emoji">${item.image}</div>`;
            
            cartHTML += `
                <div class="cart-item">
                    <div class="cart-item-header">
                        <div class="cart-item-image">
                            ${cartImageContent}
                            ${cartEmojiContent}
                        </div>
                        <div class="cart-item-info">
                            <div class="cart-item-name">${item.name}</div>
                            <div class="cart-item-price">${item.price}‚ÇΩ${item.unit}</div>
                        </div>
                    </div>
                    <div class="cart-item-controls">
                        <div class="cart-qty-controls">
                            <button class="cart-qty-btn" onclick="changeCartQuantity('${item.categoryId}_${item.productId}', -1)">-</button>
                            <span class="qty-display">${item.quantity}</span>
                            <button class="cart-qty-btn" onclick="changeCartQuantity('${item.categoryId}_${item.productId}', 1)">+</button>
                        </div>
                        <div class="cart-item-total">${item.price * item.quantity}‚ÇΩ</div>
                    </div>
                </div>
            `;
        });

        const { subtotal, delivery, total } = calculateCartTotal();
        
        cartHTML += `
            <div class="cart-summary">
                <div class="summary-row">
                    <span>–¢–æ–≤–∞—Ä—ã:</span>
                    <span>${subtotal}‚ÇΩ</span>
                </div>
                <div class="summary-row">
                    <span>–î–æ—Å—Ç–∞–≤–∫–∞:</span>
                    <span>${delivery}‚ÇΩ</span>
                </div>
                <div class="summary-row summary-total">
                    <span>–ò—Ç–æ–≥–æ:</span>
                    <span>${total}‚ÇΩ</span>
                </div>
                <button class="checkout-btn" onclick="proceedToOrder()" ${subtotal < 3500 ? 'disabled' : ''}>
                    –û—Ñ–æ—Ä–º–∏—Ç—å –∑–∞–∫–∞–∑
                </button>
            </div>
        </div>`;

        cartContent.innerHTML = cartHTML;
    }
    
    showScreen('cart-screen');
}

// –§—É–Ω–∫—Ü–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏—è –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –≤ –∫–æ—Ä–∑–∏–Ω–µ
function changeCartQuantity(cartKey, delta) {
    const item = cart[cartKey];
    if (!item) return;

    const newQuantity = item.quantity + delta;
    if (newQuantity <= 0) {
        delete cart[cartKey];
    } else if (newQuantity > item.maxQty) {
        showNotification(`–ú–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ: ${item.maxQty} —à—Ç.`, 'warning');
        return;
    } else {
        item.quantity = newQuantity;
    }

    localStorage.setItem('tundra_cart', JSON.stringify(cart));
    updateCartBadge();
    showCart(); // –ü–µ—Ä–µ—Ä–∏—Å–æ–≤—ã–≤–∞–µ–º –∫–æ—Ä–∑–∏–Ω—É
}

// –§—É–Ω–∫—Ü–∏—è —Ä–∞—Å—á–µ—Ç–∞ –∏—Ç–æ–≥–æ–≤ –∫–æ—Ä–∑–∏–Ω—ã
function calculateCartTotal() {
    const subtotal = Object.values(cart).reduce((sum, item) => sum + (item.price * item.quantity), 0);
    const deliveryZone = document.getElementById('delivery-zone')?.value;
    
    let delivery = 0;
    if (deliveryZone === 'moscow') {
        delivery = subtotal >= 5000 ? 0 : 400;
    } else if (deliveryZone === 'mo') {
        delivery = 700;
    }
    
    const total = subtotal + delivery;
    
    return { subtotal, delivery, total };
}

// –§—É–Ω–∫—Ü–∏—è –ø–µ—Ä–µ—Ö–æ–¥–∞ –∫ –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏—é –∑–∞–∫–∞–∑–∞
function proceedToOrder() {
    const { subtotal } = calculateCartTotal();
    if (subtotal < 3500) {
        showNotification('–ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è —Å—É–º–º–∞ –∑–∞–∫–∞–∑–∞: 3,500‚ÇΩ', 'warning');
        return;
    }
    showScreen('order-form-screen');
}

// –§—É–Ω–∫—Ü–∏—è –ø–æ–∫–∞–∑–∞ –ø—Ä–æ—Ñ–∏–ª—è
function showProfile() {
    showScreen('profile-screen');
}

// –§—É–Ω–∫—Ü–∏—è –ø–æ–∫–∞–∑–∞ –º–æ–∏—Ö –∑–∞–∫–∞–∑–æ–≤
function showMyOrders() {
    showScreen('my-orders-screen');
}

// –§—É–Ω–∫—Ü–∏—è –ø—Ä–æ–≤–µ—Ä–∫–∏ —Ä–∞–±–æ—á–∏—Ö —á–∞—Å–æ–≤
function isWorkingHours() {
    const now = new Date();
    const hour = now.getHours();
    return hour >= 10 && hour < 21;
}

// –§—É–Ω–∫—Ü–∏—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Å—Ç–∞—Ç—É—Å–∞ —Ä–∞–±–æ—Ç—ã
function updateWorkStatus() {
    const statusEl = document.getElementById('work-status');
    if (isWorkingHours()) {
        statusEl.textContent = '–†–∞–±–æ—Ç–∞–µ–º';
        statusEl.style.color = '#27ae60';
    } else {
        statusEl.textContent = '–ó–∞–∫—Ä—ã—Ç–æ';
        statusEl.style.color = '#e74c3c';
    }
}

// –§—É–Ω–∫—Ü–∏—è –ø–æ–∫–∞–∑–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
function showNotification(message, type = 'info') {
    const notification = document.getElementById('notification');
    notification.textContent = message;
    notification.className = `notification ${type}`;
    
    setTimeout(() => {
        notification.style.opacity = '0';
    }, 3000);
}

// –§—É–Ω–∫—Ü–∏–∏ –¥–ª—è –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞ —Å —á–∞—Å–∞–º–∏ —Ä–∞–±–æ—Ç—ã
function showWorkHours() {
    const modal = document.getElementById('work-hours-modal');
    modal.classList.add('active');
}

function hideWorkHours() {
    const modal = document.getElementById('work-hours-modal');
    modal.classList.remove('active');
}

// –§—É–Ω–∫—Ü–∏—è –æ—Ç–∫—Ä—ã—Ç–∏—è –ø–æ–¥–¥–µ—Ä–∂–∫–∏
function openSupport() {
    if (window.Telegram?.WebApp) {
        window.Telegram.WebApp.openTelegramLink('https://t.me/nextleveluppp');
    } else {
        window.open('https://t.me/nextleveluppp', '_blank');
    }
}

// –§—É–Ω–∫—Ü–∏—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –¥–æ—Å—Ç–∞–≤–∫–µ
function updateDeliveryInfo() {
    const deliveryZone = document.getElementById('delivery-zone').value;
    const deliveryInfo = document.querySelector('.delivery-info');
    
    if (deliveryZone === 'moscow') {
        deliveryInfo.innerHTML = `
            <h4>–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –¥–æ—Å—Ç–∞–≤–∫–µ</h4>
            <div class="delivery-rules">
                <div class="delivery-rule">
                    <strong>–ú–æ—Å–∫–≤–∞ (–ú–ö–ê–î):</strong> 400‚ÇΩ, –±–µ—Å–ø–ª–∞—Ç–Ω–æ –æ—Ç 5000‚ÇΩ
                </div>
                <div class="delivery-rule">
                    <strong>–ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–π –∑–∞–∫–∞–∑:</strong> 3500‚ÇΩ
                </div>
            </div>
        `;
    } else if (deliveryZone === 'mo') {
        deliveryInfo.innerHTML = `
            <h4>–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –¥–æ—Å—Ç–∞–≤–∫–µ</h4>
            <div class="delivery-rules">
                <div class="delivery-rule">
                    <strong>–ú–æ—Å–∫–æ–≤—Å–∫–∞—è –æ–±–ª–∞—Å—Ç—å:</strong> –º–∏–Ω–∏–º–∞–ª–∫–∞ 5000‚ÇΩ, –¥–æ—Å—Ç–∞–≤–∫–∞ 700‚ÇΩ
                </div>
                <div class="delivery-rule">
                    <strong>–ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–π –∑–∞–∫–∞–∑:</strong> 5000‚ÇΩ
                </div>
            </div>
        `;
    } else {
        deliveryInfo.innerHTML = `
            <h4>–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –¥–æ—Å—Ç–∞–≤–∫–µ</h4>
            <div class="delivery-rules">
                <div class="delivery-rule">
                    <strong>–ú–æ—Å–∫–≤–∞ (–ú–ö–ê–î):</strong> 400‚ÇΩ, –±–µ—Å–ø–ª–∞—Ç–Ω–æ –æ—Ç 5000‚ÇΩ
                </div>
                <div class="delivery-rule">
                    <strong>–ú–û:</strong> –º–∏–Ω–∏–º–∞–ª–∫–∞ 5000‚ÇΩ, –¥–æ—Å—Ç–∞–≤–∫–∞ 700‚ÇΩ
                </div>
                <div class="delivery-rule">
                    <strong>–ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–π –∑–∞–∫–∞–∑:</strong> 3500‚ÇΩ
                </div>
            </div>
        `;
    }
}

// –§—É–Ω–∫—Ü–∏—è —Å—Ç–∞—Ä—Ç–∞ –∏–∑ –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ–≥–æ —ç–∫—Ä–∞–Ω–∞
function startFromWelcome() {
    showScreen('main-screen');
    updateWorkStatus();
    setInterval(updateWorkStatus, 60000);
}

// –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –æ—Ç–ø—Ä–∞–≤–∫–∏ —Ñ–æ—Ä–º—ã –∑–∞–∫–∞–∑–∞
document.addEventListener('DOMContentLoaded', () => {
    const orderForm = document.getElementById('orderForm');
    if (orderForm) {
        orderForm.addEventListener('submit', async (e) => {
            e.preventDefault();
            
            // –ü—Ä–æ–≤–µ—Ä—è–µ–º –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–π –∑–∞–∫–∞–∑ –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –∑–æ–Ω—ã –¥–æ—Å—Ç–∞–≤–∫–∏
            const deliveryZone = document.getElementById('delivery-zone').value;
            const { subtotal } = calculateCartTotal();
            
            if (deliveryZone === 'mo' && subtotal < 5000) {
                showNotification('–î–ª—è –ú–æ—Å–∫–æ–≤—Å–∫–æ–π –æ–±–ª–∞—Å—Ç–∏ –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–π –∑–∞–∫–∞–∑: 5,000‚ÇΩ', 'warning');
                return;
            } else if (deliveryZone === 'moscow' && subtotal < 3500) {
                showNotification('–î–ª—è –ú–æ—Å–∫–≤—ã –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–π –∑–∞–∫–∞–∑: 3,500‚ÇΩ', 'warning');
                return;
            } else if (!deliveryZone) {
                showNotification('–í—ã–±–µ—Ä–∏—Ç–µ –∑–æ–Ω—É –¥–æ—Å—Ç–∞–≤–∫–∏', 'warning');
                return;
            }
            
            // –ü—Ä–æ–≤–µ—Ä—è–µ–º –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–æ–ª—è
            const street = document.getElementById('street').value.trim();
            const house = document.getElementById('house').value.trim();
            const phone = document.getElementById('phone').value.trim();
            
            if (!street || !house || !phone) {
                showNotification('–ó–∞–ø–æ–ª–Ω–∏—Ç–µ –≤—Å–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–æ–ª—è', 'warning');
                return;
            }
            
            const formData = {
                deliveryZone: deliveryZone,
                address: {
                    street: document.getElementById('street').value.trim(),
                    house: document.getElementById('house').value.trim(),
                    apartment: document.getElementById('apartment').value.trim(),
                    floor: document.getElementById('floor').value.trim(),
                    intercom: document.getElementById('intercom').value.trim()
                },
                phone: document.getElementById('phone').value.trim(),
                comment: document.getElementById('comment').value.trim(),
                cartItems: Object.values(cart).filter(i => i.quantity > 0),
                totals: calculateCartTotal()
            };

            // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä –∑–∞–≥—Ä—É–∑–∫–∏
            const submitBtn = e.target.querySelector('button[type="submit"]');
            const originalText = submitBtn.textContent;
            submitBtn.textContent = '–û—Ç–ø—Ä–∞–≤–ª—è–µ–º –∑–∞–∫–∞–∑...';
            submitBtn.disabled = true;
            
            try {
                const response = await fetch(`${API_BASE}/api/orders`, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(formData)
                });

                if (!response.ok) throw new Error('HTTP ' + response.status);
                
                const result = await response.json();
                if (result.ok) {
                    // –ó–∞–∫–∞–∑ —É—Å–ø–µ—à–Ω–æ —Å–æ–∑–¥–∞–Ω –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ
                    orderCounter = parseInt(result.orderId);
                    localStorage.setItem('tundra_order_counter', orderCounter.toString());
                    
                    // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —É—Å–ø–µ—à–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ
                    document.getElementById('order-number').textContent = `–ù–æ–º–µ—Ä –∑–∞–∫–∞–∑–∞: #${orderCounter}`;
                    showScreen('order-success-screen');
                    showNotification('–ó–∞–∫–∞–∑ —É—Å–ø–µ—à–Ω–æ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω! –û–∂–∏–¥–∞–π—Ç–µ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è –æ—Ç –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞.', 'success');
                    
                    // –û—á–∏—â–∞–µ–º –∫–æ—Ä–∑–∏–Ω—É
                    cart = {};
                    localStorage.setItem('tundra_cart', JSON.stringify(cart));
                    updateCartBadge();
                    
                    return; // –í—ã—Ö–æ–¥–∏–º –∏–∑ —Ñ—É–Ω–∫—Ü–∏–∏
                }
            } catch (err) {
                console.error('–û—à–∏–±–∫–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏ –∑–∞–∫–∞–∑–∞:', err);
                showNotification('–û—à–∏–±–∫–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏ –∑–∞–∫–∞–∑–∞. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –µ—â–µ —Ä–∞–∑.', 'error');
            } finally {
                // –í–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –∫–Ω–æ–ø–∫—É
                submitBtn.textContent = originalText;
                submitBtn.disabled = false;
            }

            // Fallback - –µ—Å–ª–∏ —á—Ç–æ-—Ç–æ –ø–æ—à–ª–æ –Ω–µ —Ç–∞–∫
            showNotification('–ó–∞–∫–∞–∑ –Ω–µ –±—ã–ª –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –µ—â–µ —Ä–∞–∑.', 'error');

            // –û—á–∏—â–∞–µ–º –∫–æ—Ä–∑–∏–Ω—É
            cart = {};
            localStorage.setItem('tundra_cart', JSON.stringify(cart));
            updateCartBadge();

            document.getElementById('order-number').textContent = `–ù–æ–º–µ—Ä –∑–∞–∫–∞–∑–∞: #${orderCounter}`;
            showScreen('order-success-screen');
            showNotification('–ó–∞–∫–∞–∑ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω. –û–∂–∏–¥–∞–π—Ç–µ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è!', 'success');
        });
    }
});

// –§—É–Ω–∫—Ü–∏—è —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–∞ –∫–∞—Ç–µ–≥–æ—Ä–∏–π
function renderCategories() {
    const grid = document.getElementById('categories-grid');
    grid.innerHTML = '';

    categories.forEach(category => {
        const card = document.createElement('div');
        card.className = 'category-card';
        card.onclick = () => showCategory(category.id);

        card.innerHTML = `
            <div class="category-icon">${category.icon}</div>
            <div class="category-name">${category.name}</div>
            <div class="category-desc">${category.desc}</div>
            <div class="category-count">${category.count} —Ç–æ–≤–∞—Ä–æ–≤</div>
        `;

        grid.appendChild(card);
    });
}

// –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
function initApp() {
    // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω—ã–π —ç–∫—Ä–∞–Ω –¥–æ –Ω–∞–∂–∞—Ç–∏—è –∫–Ω–æ–ø–∫–∏
    showScreen('welcome-screen');

    // –†–µ–Ω–¥–µ—Ä–∏–º –∫–∞—Ç–µ–≥–æ—Ä–∏–∏
    renderCategories();

    // –û–±–Ω–æ–≤–ª—è–µ–º —Å—á–µ—Ç—á–∏–∫ –∫–æ—Ä–∑–∏–Ω—ã
    updateCartBadge();

    // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ–º Telegram Web App
    if (window.Telegram?.WebApp) {
        const user = window.Telegram.WebApp.initDataUnsafe?.user;
        if (user) {
            const profileName = document.querySelector('.profile-name');
            if (profileName) {
                profileName.textContent = user.first_name + (user.last_name ? ` ${user.last_name}` : '');
            }
        }
    }
}

// –ó–∞–ø—É—Å–∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
document.addEventListener('DOMContentLoaded', initApp);

// –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –∫–ª–∏–∫–∞ –≤–Ω–µ –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞ –¥–ª—è –∑–∞–∫—Ä—ã—Ç–∏—è
document.addEventListener('click', (e) => {
    const modal = document.getElementById('work-hours-modal');
    if (e.target === modal) {
        hideWorkHours();
    }
});



